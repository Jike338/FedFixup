module load cuda/10.2.89

dirc="log_new"
pt_dirc="/research/nfs_chao_209/chenghao/new_fractal_pretraining_models/224x224/"

seed=0
NCCL_P2P_LEVEL=0 CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 --data /research/nfs_chao_209/james/dataset/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 128 --frac 1.0 --alpha 0.3 --num_users 10 --rounds 100 --num_classes 10 --pretrained ${pt_dirc}/fractal_mocov2/resnet18-100ep.pth > ${dirc}/tiny_fps_simsiam_${seed}.txt 


# Centralized training
CUDA_VISIBLE_DEVICES=2,3 python3 main_centralized.py --dataset tiny --data /research/nfs_chao_209/james/dataset/tiny-imagenet-200 -a resnet18 --print-freq 100 > lot_cent_tiny_s.txt



CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 > res1/a0.1.txt
CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --norm_layer GroupNorm > res1/a0.1_gn.txt


CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.05 --steps 20 > res1/a0.1_step20.txt
CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.05 --norm_layer GroupNorm --steps 20 > res1/a0.1_gn_step20.txt
CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 1000 --steps 20 > res1/0.1_delaybn50_step20.txt


CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 50 > res1/0.1_delaybn50.txt

CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.3 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 > res1/a0.3.txt
CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.3 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --norm_layer GroupNorm > res1/a0.3_gn.txt

CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.3 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 50 > res1/a0.3_delaybn50.txt
CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.3 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 25 > res1/a0.3_delaybn25.txt


CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 20 > res1/0.1_delaybn20.txt
CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 80 > res1/0.1_delaybn80.txt

CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 100 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 > res1/a100.txt
CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 100 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --norm_layer GroupNorm > res1/a100_gn.txt

CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 100 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 50 > res1/a100_delaybn50.txt
CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 100 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 25 > res1/a100_delaybn25.txt

CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer GroupNorm > reproduce/gn_iid.txt
CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm > reproduce/bn_iid.txt

CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer GroupNorm > reproduce/gn_dir.txt
CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm > reproduce/bn_dir.txt

CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer GroupNorm --method step > reproduce/gn_shards.txt
CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --method step > reproduce/bn_shards.txt

CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --method step --use_true_stats --id usetrue > reproduce/bn_shards_use_true.txt
CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --use_true_stats --id usetrue > reproduce/bn_dir_use_true.txt
CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.3 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --use_true_stats --id usetrue > reproduce/bn_dir_0.3_use_true.txt
CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --use_true_stats --id usetrue > reproduce/bn_iid_use_true.txt


CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --method dir --id skip


CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 1000 > reproduce/bn_delay@1000.txt

CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --method dir --id iid_test


#######
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm > res_new/bn_r128_e5_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm > res_new/gn_r128_e5_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 > res_new/bn_r128_e5_shards_delay@50.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue > res_new/bn_r128_e5_shards_usetrue.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm > res_new/bn_r128_e5_dir01.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm > res_new/gn_r128_e5_dir01.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 > res_new/bn_r128_e5_dir01_delay@50.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue > res_new/bn_r128_e5_dir01_usetrue.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm > res_new/bn_r128_e5_dir100.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm > res_new/gn_r128_e5_dir100.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 > res_new/bn_r128_e5_dir100_delay@50.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue > res_new/bn_r128_e5_dir100_usetrue.txt


python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/bn_r3200_e5_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/gn_r3200_e5_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/bn_r3200_e5_shards_delay@50.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue --steps 20 --log_every_round 20 --id usetrue_resonly > res_new_res_only_3200/bn_r3200_e5_shards_usetrue.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/bn_r3200_e5_dir01_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/gn_r3200_e5_dir01_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/bn_r3200_e5_dir01_delay@50_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue --steps 20 --log_every_round 20 --id usetrue_test_small_lr > res_new_res_only_3200/bn_r3200_e5_dir01_usetrue_lr0.002.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/bn_r3200_e5_dir100.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/gn_r3200_e5_dir100.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/bn_r3200_e5_dir100_delay@50.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue --steps 20 --log_every_round 20 --id usetrue_resonly > res_new_res_only_3200/bn_r3200_e5_dir100_usetrue.txt




python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/bn_r3200_e5_shards_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/bn_r3200_e5_dir01_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/bn_r3200_e5_dir100_lr0.002.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/bn_r3200_e5_shards_user5.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/bn_r3200_e5_dir01_user5.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/bn_r3200_e5_dir100_user5.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/gn_r3200_e5_shards_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/gn_r3200_e5_dir01_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/gn_r3200_e5_dir100_lr0.002.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/gn_r3200_e5_shards_user5.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/gn_r3200_e5_dir01_user5.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/gn_r3200_e5_dir100_user5.txt


#delay 
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_10_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay_10_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_10_client_01 > res_new_res_only_3200/bn_r3200_e5_dir01_delay_10_client_01.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_10_client_iid > res_new_res_only_3200/bn_r3200_e5_dir100_delay_10_client_iid.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_5_client_01 > res_new_res_only_3200/bn_r3200_e5_dir01_delay_5_client_01.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_10_client_iid > res_new_res_only_3200/bn_r3200_e5_dir100_delay_5_client_iid.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 --id new_2 > res_new/bn_r128_e5_shards_delay@50_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 30 --id new_2 > res_new/bn_r128_e5_shards_delay@30_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 80 --id new_2 > res_new/bn_r128_e5_shards_delay@80_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 20 --id new_2 > res_new/bn_r128_e5_shards_delay@20_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 60 --id new_2 > res_new/bn_r128_e5_shards_delay@60_new_2.txt

#fine-grained
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 0 --steps 20 --log_every_round 20 --id delay@0_10_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@0_10_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 400 --steps 20 --log_every_round 20 --id delay@400_10_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@400_10_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 800 --steps 20 --log_every_round 20 --id delay@800_10_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@800_10_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1200 --steps 20 --log_every_round 20 --id delay@1200_10_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@1200_10_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 2000 --steps 20 --log_every_round 20 --id delay@2000_10_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@2000_10_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 2400 --steps 20 --log_every_round 20 --id delay@2400_10_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@2400_10_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 2800 --steps 20 --log_every_round 20 --id delay@2800_10_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@2800_10_client_shards.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 0 --steps 20 --log_every_round 20 --id delay@0_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@0_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 400 --steps 20 --log_every_round 20 --id delay@400_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@400_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 800 --steps 20 --log_every_round 20 --id delay@800_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@800_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 1200 --steps 20 --log_every_round 20 --id delay@1200_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@1200_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 2000 --steps 20 --log_every_round 20 --id delay@2000_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@2000_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 2400 --steps 20 --log_every_round 20 --id delay@2400_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@2400_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 2800 --steps 20 --log_every_round 20 --id delay@2800_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@2800_5_client_shards.txt


###




python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id new > res_new/bn_r128_e5_shards_new.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id new > res_new/gn_r128_e5_shards_new.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 --id new_2 > res_new/bn_r128_e5_shards_delay@50_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue_new_2 > res_new/bn_r128_e5_shards_usetrue_new_2.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id new > res_new/bn_r128_e5_dir01_new.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id new > res_new/gn_r128_e5_dir01_new.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 --id new_2 > res_new/bn_r128_e5_dir01_delay@50_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue_new_2 > res_new/bn_r128_e5_dir01_usetrue_new_2.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id new > res_new/bn_r128_e5_dir100_new.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id new > res_new/gn_r128_e5_dir100_new.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 --id new_2 > res_new/bn_r128_e5_dir100_delay@50_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue_new_2 > res_new/bn_r128_e5_dir100_usetrue_new_2.txt




# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_01_2 > tiny_output/resnet18_bn_step100_01_2.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 1 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@1_a01 > tiny_output/resnet18_bn_step100_delay@1_a01.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 100 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@100_a01_2 > tiny_output/resnet18_bn_step100_delay@100_a01_2.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 200 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@200_a01 > tiny_output/resnet18_bn_step100_delay@200_a01.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 400 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@400_a01 > tiny_output/resnet18_bn_step100_delay@400_a01.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 800 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@800_a01 > tiny_output/resnet18_bn_step100_delay@800_a01.txt

# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 640 --freeze_bn_at_round 0 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/delay0_lenet > cifar100_output/delay0_lenet.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 640 --freeze_bn_at_round 1 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/delay1_lenet > cifar100_output/delay1_lenet.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 640 --freeze_bn_at_round 50 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/delay50_lenet > cifar100_output/delay50_lenet.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 640 --freeze_bn_at_round 200 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/delay200_lenet > cifar100_output/delay200_lenet.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 640 --freeze_bn_at_round 400 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/delay400_lenet > cifar100_output/delay400_lenet.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 640 --freeze_bn_at_round 800 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/delay800_lenet > cifar100_output/delay800_lenet.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 640 --freeze_bn_at_round 2400 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/delay2400_lenet > cifar100_output/delay2400_lenet.txt

# ** delay
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0.1 --rounds 640 --freeze_bn_at_round 320 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_delay_freq20_shards > cifar100_output/5clients_delay_freq20_shards.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 1 --method step --alpha 0.1 --rounds 128 --freeze_bn_at_round 64 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_delay_freq500_shards > cifar100_output/5clients_delay_freq500_shards.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 1 --method step --alpha 0.1 --rounds 128 --freeze_bn_at_round 32 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_delay_freq2500_shards > cifar100_output/5clients_delay_freq2500_shards.txt

# #** regular BN
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0.1 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_freq20_shards > cifar100_output/5clients_freq20_shards.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 1 --method step --alpha 0.1 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_freq500_shards > cifar100_output/5clients_freq500_shards.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 1 --method step --alpha 0.1 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_freq2500_shards > cifar100_output/5clients_freq2500_shards.txt

# #** delay
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 640 --freeze_bn_at_round 320 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_delay_freq20_a01 > cifar100_output/5clients_delay_freq20_a01.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 128 --freeze_bn_at_round 64 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_delay_freq500_a01 > cifar100_output/5clients_delay_freq500_a01.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 128 --freeze_bn_at_round 32 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_delay_freq2500_a01 > cifar100_output/5clients_delay_freq2500_a01.txt

# #** regular BN
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_freq20_a01 > cifar100_output/5clients_freq20_a01.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_freq500_a01 > cifar100_output/5clients_freq500_a01.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_freq2500_a01 > cifar100_output/5clients_freq2500_a01.txt


# #** delay
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method dir --alpha 100 --rounds 640 --freeze_bn_at_round 320 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_delay_freq20_a100 > cifar100_output/5clients_delay_freq20_a100.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 1 --method dir --alpha 100 --rounds 128 --freeze_bn_at_round 64 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_delay_freq500_a100 > cifar100_output/5clients_delay_freq500_a100.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 1 --method dir --alpha 100 --rounds 128 --freeze_bn_at_round 32 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_delay_freq2500_a100 > cifar100_output/5clients_delay_freq2500_a100.txt

# #** regular BN
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method dir --alpha 100 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_freq20_a100 > cifar100_output/5clients_freq20_a100.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 1 --method dir --alpha 100 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_freq500_a100 > cifar100_output/5clients_freq500_a100.txt
# python3 main_fl_clean.py --dataset cifar100 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 1 --method dir --alpha 100 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/5clients_freq2500_a100 > cifar100_output/5clients_freq2500_a100.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 20 -b 20 --frac 1 --method step --alpha 0.1 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupBatchNorm --probe_activs --id cifar100_output/tensorboard/GroupBatchNorm_20 > cifar100_output/GroupBatchNorm_20.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0.1 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupBatchNorm --probe_activs --id cifar100_output/tensorboard/GroupBatchNorm_100 > cifar100_output/GroupBatchNorm_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 500 -b 20 --frac 1 --method step --alpha 0.1 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupBatchNorm --probe_activs --id cifar100_output/tensorboard/GroupBatchNorm_500 > cifar100_output/GroupBatchNorm_500.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 20 -b 20 --frac 1 --method step --alpha 0.1 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/GroupBatchNorm_20_BN > cifar100_output/GroupBatchNorm_20_BN.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0.1 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/GroupBatchNorm_100_BN > cifar100_output/GroupBatchNorm_100_BN.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 500 -b 20 --frac 1 --method step --alpha 0.1 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --id cifar100_output/tensorboard/GroupBatchNorm_500_BN > cifar100_output/GroupBatchNorm_500_BN.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 20 -b 20 --frac 1 --method step --alpha 0.1 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --freeze_bn_at_round 800 --id cifar100_output/tensorboard/GroupBatchNorm_20_FreezeBN > cifar100_output/GroupBatchNorm_20_FreezeBN.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0.1 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --freeze_bn_at_round 320 --id cifar100_output/tensorboard/GroupBatchNorm_100_FreezeBN > cifar100_output/GroupBatchNorm_100_FreezeBN.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 500 -b 20 --frac 1 --method step --alpha 0.1 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --probe_activs --freeze_bn_at_round 64 --id cifar100_output/tensorboard/GroupBatchNorm_500_FreezeBN > cifar100_output/GroupBatchNorm_500_FreezeBN.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 20 -b 20 --frac 1 --method step --alpha 0.1 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --probe_activs --id cifar100_output/tensorboard/GroupBatchNorm_20_GN > cifar100_output/GroupBatchNorm_20_GN.txt

# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0.1 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --probe_activs --id cifar100_output/tensorboard/GroupBatchNorm_100_GN > cifar100_output/GroupBatchNorm_100_GN.txt
# python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --steps 500 -b 20 --frac 1 --method step --alpha 0.1 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --probe_activs --id cifar100_output/tensorboard/GroupBatchNorm_500_GN > cifar100_output/GroupBatchNorm_500_GN.txt