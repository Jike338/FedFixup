#!/bin/bash

#SBATCH --account=kpsounis_171
#SBATCH --partition=main
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=1
#SBATCH --mem=64G
#SBATCH --time=20:00:00
#SBATCH --partition=gpu
#SBATCH --gpus-per-task=a100:2
#SBATCH --output=slurm_out/%x_%j.out


module load python
module spider cuda

cd /scratch1/jikezhon/FedFixup
source ~/miniconda3/bin/activate fl


# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 5 -b 20 --frac 1 --method step --alpha 0 --rounds 12800 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs20_5 > study_BN_increase/shards_bs20_5.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 10 -b 20 --frac 1 --method step --alpha 0 --rounds 6400 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs20_10 > study_BN_increase/shards_bs20_10.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs20_20 > study_BN_increase/shards_bs20_20.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 50 -b 20 --frac 1 --method step --alpha 0 --rounds 1280 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs20_50 > study_BN_increase/shards_bs20_50.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs20_100 > study_BN_increase/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs20_500 > study_BN_increase/shards_bs20_500.txt

# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 5 -b 20 --frac 1 --method dir --alpha 100 --rounds 12800 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs20_5 > study_BN_increase/iid_bs20_5.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 10 -b 20 --frac 1 --method dir --alpha 100 --rounds 6400 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs20_10 > study_BN_increase/iid_bs20_10.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 1 --method dir --alpha 100 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs20_20 > study_BN_increase/iid_bs20_20.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 50 -b 20 --frac 1 --method dir --alpha 100 --rounds 1280 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs20_50 > study_BN_increase/iid_bs20_50.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method dir --alpha 100 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs20_100 > study_BN_increase/iid_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 1 --method dir --alpha 100 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs20_500 > study_BN_increase/iid_bs20_500.txt

# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 5 -b 128 --frac 1 --method dir --alpha 100 --rounds 12800 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs128_5 > study_BN_increase/iid_bs128_5.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 10 -b 128 --frac 1 --method dir --alpha 100 --rounds 6400 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs128_10 > study_BN_increase/iid_bs128_10.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 20 -b 128 --frac 1 --method dir --alpha 100 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs128_20 > study_BN_increase/iid_bs128_20.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 50 -b 128 --frac 1 --method dir --alpha 100 --rounds 1280 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs128_50 > study_BN_increase/iid_bs128_50.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 128 --frac 1 --method dir --alpha 100 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs128_100 > study_BN_increase/iid_bs128_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 500 -b 128 --frac 1 --method dir --alpha 100 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/iid_bs128_500 > study_BN_increase/iid_bs128_500.txt

# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 5 -b 128 --frac 1 --method step --alpha 0 --rounds 12800 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs128_5 > study_BN_increase/shards_bs128_5.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 10 -b 128 --frac 1 --method step --alpha 0 --rounds 6400 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs128_10 > study_BN_increase/shards_bs128_10.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 20 -b 128 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs128_20 > study_BN_increase/shards_bs128_20.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 50 -b 128 --frac 1 --method step --alpha 0 --rounds 1280 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs128_50 > study_BN_increase/shards_bs128_50.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 128 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs128_100 > study_BN_increase/shards_bs128_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 500 -b 128 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs128_500 > study_BN_increase/shards_bs128_500.txt


# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs20_100_lr0.002 > study_BN_increase/shards_bs20_100_lr0.002.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 10 --probe_activs  --id study_BN_increase/tensorboard/shards_bs20_100_reproduce > study_BN_increase/shards_bs20_100_reproduce.txt





# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 0 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay0 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 1 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay1 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 50 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay50 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 100 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 150 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay150 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 200 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay200 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 250 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay250 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 300 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay300 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 450 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay350 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 400 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay400 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 450 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay450 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 500 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay500 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 550 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay550 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 600 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay600 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 650 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay650 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 700 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay650 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 750 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100.delay650 > study_best_freeze/shards_bs20_100.txt


# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 0 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 1 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 50 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 100 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 150 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 200 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 300 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 350 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 400 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 500 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 550 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 600 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 650 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 700 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 750 --num_data 49000 --lr 0.002 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100 > study_best_freeze/shards_bs20_100.txt


# python3 main_fl_clean_update_bn.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 5 -b 20 --frac 1 --method step --alpha 0 --rounds 12800 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs20_5_update_bn > study_BN_increase/shards_bs20_5_update_bn.txt
# python3 main_fl_clean_update_bn.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs20_20_update_bn > study_BN_increase/shards_bs20_20_update_bn.txt
# python3 main_fl_clean_update_bn.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 50 -b 20 --frac 1 --method step --alpha 0 --rounds 1280 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_BN_increase/tensorboard/shards_bs20_50_update_bn > study_BN_increase/shards_bs20_50_update_bn.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0 --rounds 640 --freeze_bn_at_round 320 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --probe_activs --update_bn_after_freeze --id ablation_main/tensorboard/resnet18_bn_cifar10_delay_noniid0_update_bn > ablation_main/resnet18_bn_cifar10_delay_noniid0_update_bn.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 640 --freeze_bn_at_round 320 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --probe_activs --update_bn_after_freeze --id ablation_main/tensorboard/resnet18_bn_cifar10_delay_noniid01_update_bn > ablation_main/resnet18_bn_cifar10_delay_noniid01_update_bn.txt


# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 0 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay0 > study_best_freeze/shards_bs20_100_5users_delay0.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 1 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay1 > study_best_freeze/shards_bs20_100_5users_delay1.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 50 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay50 > study_best_freeze/shards_bs20_100_5users_delay50.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 100 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay100 > study_best_freeze/shards_bs20_100_5users_delay100.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 150 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay150 > study_best_freeze/shards_bs20_100_5users_delay150.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 200 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay200 > study_best_freeze/shards_bs20_100_5users_delay200.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 250 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay250 > study_best_freeze/shards_bs20_100_5users_delay250.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 300 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay300 > study_best_freeze/shards_bs20_100_5users_delay300.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 450 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay350 > study_best_freeze/shards_bs20_100_5users_delay350.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 400 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay400 > study_best_freeze/shards_bs20_100_5users_delay400.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 450 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay450 > study_best_freeze/shards_bs20_100_5users_delay450.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 500 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay500 > study_best_freeze/shards_bs20_100_5users_delay500.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 550 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay550 > study_best_freeze/shards_bs20_100_5users_delay550.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 600 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay600 > study_best_freeze/shards_bs20_100_5users_delay600.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 650 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay650 > study_best_freeze/shards_bs20_100_5users_delay650.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 700 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay700 > study_best_freeze/shards_bs20_100_5users_delay700.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 750 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay750 > study_best_freeze/shards_bs20_100_5users_delay750.txt

# python3 main_fl_clean_combine_bn.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 1 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 0 --num_data 49000 --lr 0.02 --num_users 5 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_5users_delay0_minimize_l2 > study_best_freeze/shards_bs20_100_5users_delay0_minimize_l2.txt
python3 main_fl_clean_combine_bn.py --dataset cifar10 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0 --rounds 800 --freeze_bn_at_round 0 --num_data 49000 --lr 0.02 --num_users 10 --probe_activs --id study_best_freeze/tensorboard/shards_bs20_100_delay0_minimize_l2 > study_best_freeze/shards_bs20_100_delay0_minimize_l2.txt
