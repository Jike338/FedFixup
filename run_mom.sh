#!/bin/bash

#SBATCH --account=kpsounis_171
#SBATCH --partition=main
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=1
#SBATCH --mem=64G
#SBATCH --time=20:00:00
#SBATCH --partition=gpu
#SBATCH --gpus-per-task=a100:2
#SBATCH --output=slurm_out/%x_%j.out


module load python
module spider cuda

cd /scratch1/jikezhon/FedFixup
source ~/miniconda3/bin/activate fl

# python3 main_fl_clean_step1.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.2 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_fix_round_2/tensorboard/GN_noactivs_step_1_shards_2 > final_poll_fix_round_2/GN_noactivs_step_1_shards_2.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_fix_round_2/tensorboard/GN_noactivs_step_20_shards_2 > final_poll_fix_round_2/GN_noactivs_step_20_shards_2.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1  --id final_poll_fix_round_2/tensorboard/GN_noactivs_step_100_shards_2 > final_poll_fix_round_2/GN_noactivs_step_100_shards_2.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_fix_round_2/tensorboard/GN_noactivs_step_500_shards_2 > final_poll_fix_round_2/GN_noactivs_step_500_shards_2.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_fix_round_2/tensorboard/GN_noactivs_step_2500_shards_2 > final_poll_fix_round_2/GN_noactivs_step_2500_shards_2.txt

# python3 main_fl_clean_step1_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method step --alpha 0 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/BN_noactivs_step_1_shards_fedavg_mom_3 > final_poll_mom/BN_noactivs_step_1_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/BN_noactivs_step_20_shards_fedavg_mom > final_poll_mom/BN_noactivs_step_20_shards_fedavg_mom.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/BN_noactivs_step_100_shards_fedavg_mom_3 > final_poll_mom/BN_noactivs_step_100_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/BN_noactivs_step_500_shards_fedavg_mom_3 > final_poll_mom/BN_noactivs_step_500_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method step --alpha 0 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/BN_noactivs_step_2500_shards_fedavg_mom_3 > final_poll_mom/BN_noactivs_step_2500_shards_fedavg_mom_3.txt

# python3 main_fl_clean_step1_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method step --alpha 0 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --norm_layer GroupNorm --log_every_round 200 --id final_poll_mom/tensorboard/GN_noactivs_step_1_shards_fedavg_mom_3 > final_poll_mom/GN_noactivs_step_1_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 5 --id final_poll_mom/tensorboard/GN_noactivs_step_20_shards_fedavg_mom_3 > final_poll_mom/GN_noactivs_step_20_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_mom/tensorboard/GN_noactivs_step_100_shards_fedavg_mom_3 > final_poll_mom/GN_noactivs_step_100_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_mom/tensorboard/GN_noactivs_step_500_shards_fedavg_mom_3 > final_poll_mom/GN_noactivs_step_500_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method step --alpha 0 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_mom/tensorboard/GN_noactivs_step_2500_shards_fedavg_mom_3 > final_poll_mom/GN_noactivs_step_2500_shards_fedavg_mom_3.txt

# python3 main_fl_clean_step1_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method step --alpha 0 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --freeze_bn_at_round 32000 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_1_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_step_1_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 1600 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_20_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_step_20_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 320 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_100_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_step_100_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 64 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_500_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_step_500_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method step --alpha 0 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 13 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_2500_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_step_2500_shards_fedavg_mom_3.txt



# python3 main_fl_clean_step1_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method step --alpha 0 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/BN_noactivs_step_1_shards_local_mom_2 > final_poll_mom/BN_noactivs_step_1_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/BN_noactivs_step_20_shards_local_mom_2 > final_poll_mom/BN_noactivs_step_20_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/BN_noactivs_step_100_shards_local_mom_2 > final_poll_mom/BN_noactivs_step_100_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/BN_noactivs_step_500_shards_local_mom_2 > final_poll_mom/BN_noactivs_step_500_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method step --alpha 0 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/BN_noactivs_step_2500_shards_local_mom_2 > final_poll_mom/BN_noactivs_step_2500_shards_local_mom_2.txt

# python3 main_fl_clean_step1_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method step --alpha 0 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --norm_layer GroupNorm --log_every_round 200 --id final_poll_mom/tensorboard/GN_noactivs_step_1_shards_local_mom_2 > final_poll_mom/GN_noactivs_step_1_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 5 --id final_poll_mom/tensorboard/GN_noactivs_step_20_shards_local_mom_2 > final_poll_mom/GN_noactivs_step_20_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_mom/tensorboard/GN_noactivs_step_100_shards_local_mom_2 > final_poll_mom/GN_noactivs_step_100_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_mom/tensorboard/GN_noactivs_step_500_shards_local_mom_2 > final_poll_mom/GN_noactivs_step_500_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method step --alpha 0 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_mom/tensorboard/GN_noactivs_step_2500_shards_local_mom_2 > final_poll_mom/GN_noactivs_step_2500_shards_local_mom_2.txt

# python3 main_fl_clean_step1_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method step --alpha 0 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --freeze_bn_at_round 32000 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_1_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_step_1_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 1600 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_20_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_step_20_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 320 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_100_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_step_100_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 64 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_500_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_step_500_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method step --alpha 0 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 13 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_2500_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_step_2500_shards_local_mom_2.txt

#normal

# python3 main_fl_clean_step1.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method step --alpha 0 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/BN_noactivs_step_1_shards_normal > final_poll_mom/BN_noactivs_step_1_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/BN_noactivs_step_20_shards_normal > final_poll_mom/BN_noactivs_step_20_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/BN_noactivs_step_100_shards_normal > final_poll_mom/BN_noactivs_step_100_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/BN_noactivs_step_500_shards_normal > final_poll_mom/BN_noactivs_step_500_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method step --alpha 0 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/BN_noactivs_step_2500_shards_normal > final_poll_mom/BN_noactivs_step_2500_shards_normal.txt

# python3 main_fl_clean_step1.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method step --alpha 0 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --norm_layer GroupNorm --log_every_round 200 --id final_poll_mom/tensorboard/GN_noactivs_step_1_shards_normal > final_poll_mom/GN_noactivs_step_1_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 5 --id final_poll_mom/tensorboard/GN_noactivs_step_20_shards_normal > final_poll_mom/GN_noactivs_step_20_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_mom/tensorboard/GN_noactivs_step_100_shards_normal > final_poll_mom/GN_noactivs_step_100_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_mom/tensorboard/GN_noactivs_step_500_shards_normal > final_poll_mom/GN_noactivs_step_500_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method step --alpha 0 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --norm_layer GroupNorm --log_every_round 1 --id final_poll_mom/tensorboard/GN_noactivs_step_2500_shards_normal > final_poll_mom/GN_noactivs_step_2500_shards_normal.txt

# python3 main_fl_clean_step1.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method step --alpha 0 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --freeze_bn_at_round 32000 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_1_shards_normal > final_poll_mom/DelayBN_noactivs_step_1_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 1600 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_20_shards_normal > final_poll_mom/DelayBN_noactivs_step_20_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method step --alpha 0 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 320 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_100_shards_normal > final_poll_mom/DelayBN_noactivs_step_100_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method step --alpha 0 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 64 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_500_shards_normal > final_poll_mom/DelayBN_noactivs_step_500_shards_normal.txt
# python3 main_fl_clean.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method step --alpha 0 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 13 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_step_2500_shards_normal > final_poll_mom/DelayBN_noactivs_step_2500_shards_normal.txt



# python3 main_fl_clean_step1_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method dir --alpha 0.1 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --freeze_bn_at_round 32000 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.1_1_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.1_1_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method dir --alpha 0.1 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 1600 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.1_20_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.1_20_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method dir --alpha 0.1 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 320 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.1_100_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.1_100_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method dir --alpha 0.1 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 64 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.1_500_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.1_500_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method dir --alpha 0.1 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 13 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.1_2500_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.1_2500_shards_fedavg_mom_3.txt

# python3 main_fl_clean_step1_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method dir --alpha 0.1 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --freeze_bn_at_round 32000 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.1_1_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.1_1_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method dir --alpha 0.1 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 1600 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.1_20_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.1_20_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method dir --alpha 0.1 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 320 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.1_100_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.1_100_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method dir --alpha 0.1 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 64 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.1_500_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.1_500_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method dir --alpha 0.1 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 13 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.1_2500_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.1_2500_shards_local_mom_2.txt

# python3 main_fl_clean_step1_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method dir --alpha 0.3 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --freeze_bn_at_round 32000 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.3_1_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.3_1_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method dir --alpha 0.3 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 1600 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.3_20_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.3_20_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method dir --alpha 0.3 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 320 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.3_100_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.3_100_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method dir --alpha 0.3 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 64 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.3_500_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.3_500_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method dir --alpha 0.3 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 13 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.3_2500_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.3_2500_shards_fedavg_mom_3.txt

# python3 main_fl_clean_step1_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method dir --alpha 0.3 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --freeze_bn_at_round 32000 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.3_1_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.3_1_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method dir --alpha 0.3 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 1600 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.3_20_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.3_20_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method dir --alpha 0.3 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 320 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.3_100_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.3_100_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method dir --alpha 0.3 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 64 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.3_500_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.3_500_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method dir --alpha 0.3 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 13 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.3_2500_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.3_2500_shards_local_mom_2.txt

# python3 main_fl_clean_step1_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method dir --alpha 0.6 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --freeze_bn_at_round 32000 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.6_1_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.6_1_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method dir --alpha 0.6 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 1600 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.6_20_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.6_20_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method dir --alpha 0.6 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 320 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.6_100_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.6_100_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method dir --alpha 0.6 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 64 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.6_500_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.6_500_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method dir --alpha 0.6 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 13 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.6_2500_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_0.6_2500_shards_fedavg_mom_3.txt

# python3 main_fl_clean_step1_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method dir --alpha 0.6 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --freeze_bn_at_round 32000 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.6_1_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.6_1_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method dir --alpha 0.6 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 1600 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.6_20_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.6_20_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method dir --alpha 0.6 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 320 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.6_100_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.6_100_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method dir --alpha 0.6 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 64 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.6_500_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.6_500_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method dir --alpha 0.6 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 13 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_0.6_2500_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_0.6_2500_shards_local_mom_2.txt

# python3 main_fl_clean_step1_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method dir --alpha 100 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --freeze_bn_at_round 32000 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_100_1_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_100_1_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method dir --alpha 100 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 1600 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_100_20_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_100_20_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method dir --alpha 100 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 320 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_100_100_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_100_100_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method dir --alpha 100 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 64 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_100_500_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_100_500_shards_fedavg_mom_3.txt
# python3 main_fl_clean_w_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method dir --alpha 100 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 13 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_100_2500_shards_fedavg_mom_3 > final_poll_mom/DelayBN_noactivs_dir_100_2500_shards_fedavg_mom_3.txt

# python3 main_fl_clean_step1_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 1  -b 20 --frac 1 --method dir --alpha 100 --rounds 64000 --num_data 49000 --lr 0.2 --num_users 5 --freeze_bn_at_round 32000 --norm_layer BatchNorm --log_every_round 200 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_100_1_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_100_1_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 20  -b 20 --frac 1 --method dir --alpha 100 --rounds 3200 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 1600 --norm_layer BatchNorm --log_every_round 5 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_100_20_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_100_20_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 100  -b 20 --frac 1 --method dir --alpha 100 --rounds 640 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 320 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_100_100_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_100_100_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 500  -b 20 --frac 1 --method dir --alpha 100 --rounds 128 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 64 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_100_500_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_100_500_shards_local_mom_2.txt
# python3 main_fl_clean_local_mom.py --dataset cifar10 -a resnet20 --print-freq 100 --steps 2500  -b 20 --frac 1 --method dir --alpha 100 --rounds 26 --num_data 49000 --lr 0.02 --num_users 5 --freeze_bn_at_round 13 --norm_layer BatchNorm --log_every_round 1 --id final_poll_mom/tensorboard/DelayBN_noactivs_dir_100_2500_shards_local_mom_2 > final_poll_mom/DelayBN_noactivs_dir_100_2500_shards_local_mom_2.txt