module load cuda/10.2.89

dirc="log_new"
pt_dirc="/research/nfs_chao_209/chenghao/new_fractal_pretraining_models/224x224/"

seed=0
NCCL_P2P_LEVEL=0 CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 --data /research/nfs_chao_209/james/dataset/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 128 --frac 1.0 --alpha 0.3 --num_users 10 --rounds 100 --num_classes 10 --pretrained ${pt_dirc}/fractal_mocov2/resnet18-100ep.pth > ${dirc}/tiny_fps_simsiam_${seed}.txt 


# Centralized training
CUDA_VISIBLE_DEVICES=2,3 python3 main_centralized.py --dataset tiny --data /research/nfs_chao_209/james/dataset/tiny-imagenet-200 -a resnet18 --print-freq 100 > lot_cent_tiny_s.txt



CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 > res1/a0.1.txt
CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --norm_layer GroupNorm > res1/a0.1_gn.txt


CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.05 --steps 20 > res1/a0.1_step20.txt
CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.05 --norm_layer GroupNorm --steps 20 > res1/a0.1_gn_step20.txt
CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 1000 --steps 20 > res1/0.1_delaybn50_step20.txt


CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 50 > res1/0.1_delaybn50.txt

CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.3 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 > res1/a0.3.txt
CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.3 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --norm_layer GroupNorm > res1/a0.3_gn.txt

CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.3 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 50 > res1/a0.3_delaybn50.txt
CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.3 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 25 > res1/a0.3_delaybn25.txt


CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 20 > res1/0.1_delaybn20.txt
CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 0.1 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 80 > res1/0.1_delaybn80.txt

CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 100 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 > res1/a100.txt
CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 100 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --norm_layer GroupNorm > res1/a100_gn.txt

CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 100 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 50 > res1/a100_delaybn50.txt
CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 128 --frac 0.5 --alpha 100 --rounds 100 --num_classes 10 --num_data 49000 --lr 0.05 --freeze_bn_at_round 25 > res1/a100_delaybn25.txt

CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer GroupNorm > reproduce/gn_iid.txt
CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm > reproduce/bn_iid.txt

CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer GroupNorm > reproduce/gn_dir.txt
CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm > reproduce/bn_dir.txt

CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer GroupNorm --method step > reproduce/gn_shards.txt
CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --method step > reproduce/bn_shards.txt

CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --method step --use_true_stats --id usetrue > reproduce/bn_shards_use_true.txt
CUDA_VISIBLE_DEVICES=3 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --use_true_stats --id usetrue > reproduce/bn_dir_use_true.txt
CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.3 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --use_true_stats --id usetrue > reproduce/bn_dir_0.3_use_true.txt
CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --use_true_stats --id usetrue > reproduce/bn_iid_use_true.txt


CUDA_VISIBLE_DEVICES=1 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --method dir --id skip


CUDA_VISIBLE_DEVICES=2 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 1000 > reproduce/bn_delay@1000.txt

CUDA_VISIBLE_DEVICES=0 python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --steps 20 --num_users 5 --norm_layer BatchNorm --method dir --id iid_test


#######
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm > res_new/bn_r128_e5_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm > res_new/gn_r128_e5_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 > res_new/bn_r128_e5_shards_delay@50.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue > res_new/bn_r128_e5_shards_usetrue.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm > res_new/bn_r128_e5_dir01.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm > res_new/gn_r128_e5_dir01.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 > res_new/bn_r128_e5_dir01_delay@50.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue > res_new/bn_r128_e5_dir01_usetrue.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm > res_new/bn_r128_e5_dir100.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm > res_new/gn_r128_e5_dir100.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 > res_new/bn_r128_e5_dir100_delay@50.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue > res_new/bn_r128_e5_dir100_usetrue.txt


python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/bn_r3200_e5_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/gn_r3200_e5_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/bn_r3200_e5_shards_delay@50.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue --steps 20 --log_every_round 20 --id usetrue_resonly > res_new_res_only_3200/bn_r3200_e5_shards_usetrue.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/bn_r3200_e5_dir01_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/gn_r3200_e5_dir01_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/bn_r3200_e5_dir01_delay@50_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue --steps 20 --log_every_round 20 --id usetrue_test_small_lr > res_new_res_only_3200/bn_r3200_e5_dir01_usetrue_lr0.002.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/bn_r3200_e5_dir100.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/gn_r3200_e5_dir100.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id resonly > res_new_res_only_3200/bn_r3200_e5_dir100_delay@50.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue --steps 20 --log_every_round 20 --id usetrue_resonly > res_new_res_only_3200/bn_r3200_e5_dir100_usetrue.txt




python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/bn_r3200_e5_shards_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/bn_r3200_e5_dir01_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/bn_r3200_e5_dir100_lr0.002.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/bn_r3200_e5_shards_user5.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/bn_r3200_e5_dir01_user5.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/bn_r3200_e5_dir100_user5.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/gn_r3200_e5_shards_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/gn_r3200_e5_dir01_lr0.002.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_lr > res_new_res_only_3200/gn_r3200_e5_dir100_lr0.002.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/gn_r3200_e5_shards_user5.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/gn_r3200_e5_dir01_user5.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer GroupNorm --steps 20 --log_every_round 20 --id test_small_user > res_new_res_only_3200/gn_r3200_e5_dir100_user5.txt


#delay 
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_10_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay_10_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_10_client_01 > res_new_res_only_3200/bn_r3200_e5_dir01_delay_10_client_01.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_10_client_iid > res_new_res_only_3200/bn_r3200_e5_dir100_delay_10_client_iid.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 0.1 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_5_client_01 > res_new_res_only_3200/bn_r3200_e5_dir01_delay_5_client_01.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method dir --alpha 100 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --id delay_10_client_iid > res_new_res_only_3200/bn_r3200_e5_dir100_delay_5_client_iid.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 --id new_2 > res_new/bn_r128_e5_shards_delay@50_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 30 --id new_2 > res_new/bn_r128_e5_shards_delay@30_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 80 --id new_2 > res_new/bn_r128_e5_shards_delay@80_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 20 --id new_2 > res_new/bn_r128_e5_shards_delay@20_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 60 --id new_2 > res_new/bn_r128_e5_shards_delay@60_new_2.txt

#fine-grained
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 0 --steps 20 --log_every_round 20 --update_bn_after_freeze --probe_activs --id update_bn_after_freeze/tensorboard2/delay@0_10_client_shards_4 > update_bn_after_freeze/delay@0_10_client_shards_4.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 400 --steps 20 --log_every_round 20 --update_bn_after_freeze --probe_activs --id update_bn_after_freeze/tensorboard2/delay@400_10_client_shards_4 > update_bn_after_freeze/bn_r3200_e5_shards_delay@400_10_client_shards_4.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 800 --steps 20 --log_every_round 20 --update_bn_after_freeze --probe_activs --id update_bn_after_freeze/tensorboard2/delay@800_10_client_shards_4 > update_bn_after_freeze/bn_r3200_e5_shards_delay@800_10_client_shards_4.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1200 --steps 20 --log_every_round 20 --update_bn_after_freeze --probe_activs --id update_bn_after_freeze/tensorboard2/delay@1200_10_client_shards_4 > update_bn_after_freeze/bn_r3200_e5_shards_delay@1200_10_client_shards_4.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --update_bn_after_freeze --probe_activs --id update_bn_after_freeze/tensorboard2/delay@1600_10_client_shards_4 > update_bn_after_freeze/bn_r3200_e5_shards_delay@1600_10_client_shards_4.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 2000 --steps 20 --log_every_round 20 --update_bn_after_freeze --probe_activs --id update_bn_after_freeze/tensorboard2/delay@2000_10_client_shards_4 > update_bn_after_freeze/bn_r3200_e5_shards_delay@2000_10_client_shards_4.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 2400 --steps 20 --log_every_round 20 --update_bn_after_freeze --probe_activs --id update_bn_after_freeze/tensorboard2/delay@2400_10_client_shards_4 > update_bn_after_freeze/bn_r3200_e5_shards_delay@2400_10_client_shards_4.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 2800 --steps 20 --log_every_round 20 --update_bn_after_freeze --probe_activs --id update_bn_after_freeze/tensorboard2/delay@2800_10_client_shards_4 > update_bn_after_freeze/bn_r3200_e5_shards_delay@2800_10_client_shards_4.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 800 --steps 20 --log_every_round 20 --update_bn_after_freeze --probe_activs --id update_bn_after_freeze/tensorboard2/delay@800_10_client_shards_4_copy > update_bn_after_freeze/bn_r3200_e5_shards_delay@800_10_client_shards_4_copy.txt


python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 0 --steps 20 --log_every_round 20 --id delay@0_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@0_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 400 --steps 20 --log_every_round 20 --id delay@400_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@400_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 800 --steps 20 --log_every_round 20 --id delay@800_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@800_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 1200 --steps 20 --log_every_round 20 --id delay@1200_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@1200_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 2000 --steps 20 --log_every_round 20 --id delay@2000_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@2000_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 2400 --steps 20 --log_every_round 20 --id delay@2400_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@2400_5_client_shards.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 1 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 5 --norm_layer BatchNorm --freeze_bn_at_round 2800 --steps 20 --log_every_round 20 --id delay@2800_5_client_shards > res_new_res_only_3200/bn_r3200_e5_shards_delay@2800_5_client_shards.txt


###




python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id resnet18_bn > tiny_output/resnet18_bn.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tensorboard/resnet18_gn > tiny_output/resnet18_gn.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 6400 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id resnet18_bn_step20 > tiny_output/resnet18_bn_step20.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 6400 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id resnet18_gn_step20 > tiny_output/resnet18_gn_step20.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 128 --frac 1.0 --alpha 0.3 --num_users 10 --rounds 100 --lr 0.1 --num_data 98000 --norm_layer BatchNorm --id fl_clean_bn > tiny_output/fl_clean_bn.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 128 --frac 1.0 --alpha 0.3 --num_users 10 --rounds 100 --lr 0.1 --num_data 98000 --norm_layer GroupNorm --id fl_clean_gn > tiny_output/fl_clean_gn.txt

# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id lenet_bn > tiny_output/lenet_bn.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id lenet_gn > tiny_output/lenet_gn.txt

#test BN vs GN on tiny with fast communication
#* shards
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step1 > tiny_output/resnet18_bn_step1.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step20 > tiny_output/resnet18_bn_step20.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 40 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3136 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step40 > tiny_output/resnet18_bn_step40.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step100 > tiny_output/resnet18_bn_step100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step500 > tiny_output/resnet18_bn_step500.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step2500 > tiny_output/resnet18_bn_step2500.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step1 > tiny_output/resnet18_gn_step1.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20 > tiny_output/resnet18_gn_step20.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 40 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3136 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step40 > tiny_output/resnet18_gn_step40.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step100 > tiny_output/resnet18_gn_step100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step500 > tiny_output/resnet18_gn_step500.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step2500 > tiny_output/resnet18_gn_step2500.txt

#** delay BN 
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 62720 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 31360 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step1_delay@half > tiny_output/resnet18_bn_step1_delay@half.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6400 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 3200 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step20_delay@half > tiny_output/resnet18_bn_step20_delay@half.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 40 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 3136 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1568 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step40_delay@half > tiny_output/resnet18_bn_step40_delay@half.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 627 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@half > tiny_output/resnet18_bn_step100_delay@half.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 126 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step500_delay@half > tiny_output/resnet18_bn_step500_delay@half.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 64 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step2500_delay@half > tiny_output/resnet18_bn_step2500_delay@half.txt

#* alpha = 0.1
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step1_01 > tiny_output/resnet18_bn_step1_01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step20_01 > tiny_output/resnet18_bn_step20_01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_01_2 > tiny_output/resnet18_bn_step100_01_2.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step500_01 > tiny_output/resnet18_bn_step500_01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step2500_01 > tiny_output/resnet18_bn_step2500_01.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step1_01wd > tiny_output/resnet18_gn_step1_01wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20_01wd > tiny_output/resnet18_gn_step20_01wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step100_01wd > tiny_output/resnet18_gn_step100_01wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step500_01wd > tiny_output/resnet18_gn_step500_01wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step2500_01wd > tiny_output/resnet18_gn_step2500_01wd.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 3200 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step20_delay@half_a01 > tiny_output/resnet18_bn_step20_delay@half_a01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 627 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@half_a01 > tiny_output/resnet18_bn_step100_delay@half_a01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 126 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step500_delay@half_a01 > tiny_output/resnet18_bn_step500_delay@half_a01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 64 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step2500_delay@half_a01 > tiny_output/resnet18_bn_step2500_delay@half_a01.txt

#* alpha - 0.3
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step1_03 > tiny_output/resnet18_bn_step1_03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step20_03 > tiny_output/resnet18_bn_step20_03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step100_03 > tiny_output/resnet18_bn_step100_03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step500_03 > tiny_output/resnet18_bn_step500_03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step2500_03 > tiny_output/resnet18_bn_step2500_03.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step1_03 > tiny_output/resnet18_gn_step1_03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20_03 > tiny_output/resnet18_gn_step20_03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step100_03 > tiny_output/resnet18_gn_step100_03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step500_03 > tiny_output/resnet18_gn_step500_03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step2500_03 > tiny_output/resnet18_gn_step2500_03.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 3200 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step20_delay@half_a03 > tiny_output/resnet18_bn_step20_delay@half_a03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 627 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@half_a03 > tiny_output/resnet18_bn_step100_delay@half_a03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 126 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step500_delay@half_a03 > tiny_output/resnet18_bn_step500_delay@half_a03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 64 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step2500_delay@half_a03 > tiny_output/resnet18_bn_step2500_delay@half_a03.txt

#* alpha = 0.6
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step1_06 > tiny_output/resnet18_bn_step1_06.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step20_06 > tiny_output/resnet18_bn_step20_06.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step100_06 > tiny_output/resnet18_bn_step100_06.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step500_06 > tiny_output/resnet18_bn_step500_06.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step2500_06 > tiny_output/resnet18_bn_step2500_06.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step1_06 > tiny_output/resnet18_gn_step1_06.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20_06wd > tiny_output/resnet18_gn_step20_06wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step100_06wd > tiny_output/resnet18_gn_step100_06wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step500_06wd > tiny_output/resnet18_gn_step500_06wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step2500_06wd > tiny_output/resnet18_gn_step2500_06wd.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 3200 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step20_delay@half_a06 > tiny_output/resnet18_bn_step20_delay@half_a06.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 627 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@half_a06 > tiny_output/resnet18_bn_step100_delay@half_a06.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 126 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step500_delay@half_a06 > tiny_output/resnet18_bn_step500_delay@half_a06.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 64 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step2500_delay@half_a06 > tiny_output/resnet18_bn_step2500_delay@half_a06.txt

#* alpha = 100
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step1_100 > tiny_output/resnet18_bn_step1_100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step20_100 > tiny_output/resnet18_bn_step20_100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step100_100 > tiny_output/resnet18_bn_step100_100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step500_100 > tiny_output/resnet18_bn_step500_100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step2500_100 > tiny_output/resnet18_bn_step2500_100.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step1_100wd > tiny_output/resnet18_gn_step1_100wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20_100wd > tiny_output/resnet18_gn_step20_100wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step100_100wd > tiny_output/resnet18_gn_step100_100wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step500_100wd > tiny_output/resnet18_gn_step500_100wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step2500_100wd > tiny_output/resnet18_gn_step2500_100wd.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 3200 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step20_delay@half_a100 > tiny_output/resnet18_bn_step20_delay@half_a100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 627 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@half_a100 > tiny_output/resnet18_bn_step100_delay@half_a100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 126 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step500_delay@half_a100 > tiny_output/resnet18_bn_step500_delay@half_a100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 64 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step2500_delay@half_a100 > tiny_output/resnet18_bn_step2500_delay@half_a100.txt


#**** vary lr for GN step = 20
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6400 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20_lr0.1 > tiny_output/resnet18_gn_step20_lr0.1.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6400 --num_data 98000 --lr 0.05 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20_lr0.05 > tiny_output/resnet18_gn_step20_lr0.05.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6400 --num_data 98000 --lr 0.005 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20_lr0.005 > tiny_output/resnet18_gn_step20_lr0.005.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6400 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20_lr0.002 > tiny_output/resnet18_gn_step20_lr0.002.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6400 --num_data 98000 --lr 0.001 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20_lr0.001 > tiny_output/resnet18_gn_step20_lr0.001.txt
####

#make gn work on tiny
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 128 --frac 1.0 --alpha 0.3 --num_users 10 --rounds 100 --lr 0.002 --num_data 98000 --norm_layer GroupNorm --id make_gn_work_on_tiny/tensorboard/0.002wd > make_gn_work_on_tiny/0.002wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 128 --frac 1.0 --alpha 0.3 --num_users 10 --rounds 100 --lr 0.005 --num_data 98000 --norm_layer GroupNorm --id make_gn_work_on_tiny/tensorboard/0.005wd > make_gn_work_on_tiny/0.005wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 128 --frac 1.0 --alpha 0.3 --num_users 10 --rounds 100 --lr 0.02 --num_data 98000 --norm_layer GroupNorm --id make_gn_work_on_tiny/tensorboard/0.02wd > make_gn_work_on_tiny/0.02wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 128 --frac 1.0 --alpha 0.3 --num_users 10 --rounds 100 --lr 0.05 --num_data 98000 --norm_layer GroupNorm --id make_gn_work_on_tiny/tensorboard/0.05wd > make_gn_work_on_tiny/0.05wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 128 --frac 1.0 --alpha 0.3 --num_users 10 --rounds 100 --lr 0.2 --num_data 98000 --norm_layer GroupNorm --id make_gn_work_on_tiny/tensorboard/0.2wd > make_gn_work_on_tiny/0.2wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 128 --frac 1.0 --alpha 0.3 --num_users 10 --rounds 100 --lr 0.5 --num_data 98000 --norm_layer GroupNorm --id make_gn_work_on_tiny/tensorboard/0.5wd > make_gn_work_on_tiny/0.5wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --local_epochs 5 -b 128 --frac 1.0 --alpha 0.3 --num_users 10 --rounds 100 --lr 0.0005 --num_data 98000 --norm_layer GroupNorm --id make_gn_work_on_tiny/tensorboard/0.0005wd > make_gn_work_on_tiny/0.0005wd.txt
###

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id new > res_new/gn_r128_e5_shards_new.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 --id new_2 > res_new/bn_r128_e5_shards_delay@50_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue_new_2 > res_new/bn_r128_e5_shards_usetrue_new_2.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id new > res_new/bn_r128_e5_dir01_new.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id new > res_new/gn_r128_e5_dir01_new.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 --id new_2 > res_new/bn_r128_e5_dir01_delay@50_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue_new_2 > res_new/bn_r128_e5_dir01_usetrue_new_2.txt

python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id new > res_new/bn_r128_e5_dir100_new.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id new > res_new/gn_r128_e5_dir100_new.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 50 --id new_2 > res_new/bn_r128_e5_dir100_delay@50_new_2.txt
python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 128 --num_classes 10 --num_data 49000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --use_true_stats --id usetrue_new_2 > res_new/bn_r128_e5_dir100_usetrue_new_2.txt



python3 main_fl_clean.py --dataset cifar10 -a lenet --print-freq 100 --local_epochs 5 -b 20 --frac 0.5 --method step --alpha 0 --rounds 3200 --num_classes 10 --num_data 49000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1600 --steps 20 --log_every_round 20 --update_bn_after_freeze --probe_activs --id test


python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id test --method step


#weight decay
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step1_wd > tiny_output/resnet18_gn_step1_wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20_wd > tiny_output/resnet18_gn_step20_wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step100_wd > tiny_output/resnet18_gn_step100_wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step500_wd > tiny_output/resnet18_gn_step500_wd.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step2500_wd > tiny_output/resnet18_gn_step2500_wd.txt

#test long gn
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 10000 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20_long > tiny_output/resnet18_gn_step20_long.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 5000 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step100_long > tiny_output/resnet18_gn_step100_long.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step500_long > tiny_output/resnet18_gn_step500_long.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step2500_long > tiny_output/resnet18_gn_step2500_long.txt


#Test larger batch size with more iid data
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 3200 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step20_delay@half_a01 > tiny_output/resnet18_bn_step20_delay@half_a01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 627 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step100_delay@half_a01 > tiny_output/resnet18_bn_step100_delay@half_a01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 126 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step500_delay@half_a01 > tiny_output/resnet18_bn_step500_delay@half_a01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 64 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step2500_delay@half_a01 > tiny_output/resnet18_bn_step2500_delay@half_a01.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 0 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step20_delay@0_a01.largelr > tiny_output/resnet18_bn_step20_delay0_a01.largelr.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 0 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step100_delay@0_a01.largelr > tiny_output/resnet18_bn_step100_delay0_a01.largelr.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 0 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step500_delay@0_a01.largelr > tiny_output/resnet18_bn_step500_delay0_a01.largelr.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 0 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step2500_delay@0_a01.largelr > tiny_output/resnet18_bn_step2500_delay@0_a01.largelr.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 3200 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step20_delay@half_a01.largelr > tiny_output/resnet18_bn_step20_delay@half_a01.largelr.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 627 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step100_delay@half_a01.largelr > tiny_output/resnet18_bn_step100_delay@half_a01.largelr.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 400 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step100_delay@400_a01.largelr > tiny_output/resnet18_bn_step100_delay@400_a01.largelr.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 800 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step100_delay@800_a01.largelr > tiny_output/resnet18_bn_step100_delay@800_a01.largelr.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1000 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step100_delay@1000_a01.largelr > tiny_output/resnet18_bn_step100_delay@1000_a01.largelr.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 126 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step500_delay@half_a01.largelr > tiny_output/resnet18_bn_step500_delay@half_a01.largelr.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 100 --frac 0.5 --method dir --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.1 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 64 --probe_activs --id tiny_output/tensorboardbs100/resnet18_bn_step2500_delay@half_a01.largelr > tiny_output/resnet18_bn_step2500_delay@half_a01.largelr.txt


#test weight norm
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer WeightNormalization --freeze_bn_at_round 3200 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step20_delay@half_a01_wn > tiny_output/resnet18_bn_step20_delay@half_a01_wn.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1500 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer WeightNormalization --freeze_bn_at_round 627 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@half_a01_wn > tiny_output/resnet18_bn_step100_delay@half_a01_wn.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1500 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer WeightNormalization --freeze_bn_at_round 400 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@400_a01_wn > tiny_output/resnet18_bn_step100_delay@400_a01_wn.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1500 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer WeightNormalization --freeze_bn_at_round 800 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@800_a01_wn > tiny_output/resnet18_bn_step100_delay@800_a01_wn.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1500 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer WeightNormalization --freeze_bn_at_round 1200 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@1200_a01_wn > tiny_output/resnet18_bn_step100_delay@1200_a01_wn.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 500 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer WeightNormalization --freeze_bn_at_round 126 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step500_delay@half_a01_wn > tiny_output/resnet18_bn_step500_delay@half_a01_wn.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 500 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer WeightNormalization --freeze_bn_at_round 64 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step2500_delay@half_a01_wn > tiny_output/resnet18_bn_step2500_delay@half_a01_wn.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer WeightNormalization --freeze_bn_at_round 3200 --probe_activs --id test






#########pretrained study
#test BN vs GN on tiny with fast communication
#* shards
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 12800 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step20 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step20.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1500 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step100 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step500 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step500.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step2500 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar  > tiny_output/pretrain/resnet18_bn_step2500.txt

#** delay BN 
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 12800 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 6400 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step20_delay@6400 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step20_delay@6400.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1500 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1200 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step100_delay@1200 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step100_delay@1200.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 250 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step500_delay@250 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step500_delay@250.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 128 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step2500_delay@128 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step2500_delay@128.txt

#* alpha = 0.1
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 12800 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step20_01 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step20_01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1500 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step100_01 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step100_01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step500_01 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step500_01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step2500_01 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step2500_01.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 12800 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 6400 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step20_delay@6400_a01 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step20_delay@6400_a01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1500 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1200 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step100_delay@1200_a01 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step100_delay@1200_a01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 250 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step500_delay@250_a01 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step500_delay@250_a01.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 128 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step2500_delay@128_a01 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar  > tiny_output/pretrain/resnet18_bn_step2500_delay@128_a01.txt

#* alpha - 0.3
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 12800 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step20_03 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step20_03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 1500 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step100_03 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step100_03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step500_03 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step500_03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step2500_03 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step2500_03.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 12800 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 6400 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step20_delay@6400_a03 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step20_delay@6400_a03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 1500 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1200 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step100_delay@1200_a03 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step100_delay@1200_a03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 250 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step500_delay@250_a03 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar  > tiny_output/pretrain/resnet18_bn_step500_delay@250_a03.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 128 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step2500_delay@128_a03 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step2500_delay@128_a03.txt

# #* alpha = 0.6
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step20_06 > tiny_output/resnet18_bn_step20_06.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step100_06 > tiny_output/resnet18_bn_step100_06.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step500_06 > tiny_output/resnet18_bn_step500_06.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step2500_06 > tiny_output/resnet18_bn_step2500_06.txt

# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 3200 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step20_delay@half_a06 > tiny_output/resnet18_bn_step20_delay@half_a06.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 627 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@half_a06 > tiny_output/resnet18_bn_step100_delay@half_a06.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 126 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step500_delay@half_a06 > tiny_output/resnet18_bn_step500_delay@half_a06.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 64 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step2500_delay@half_a06 > tiny_output/resnet18_bn_step2500_delay@half_a06.txt

#* alpha = 100
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 12800 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step20_100 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step20_100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 1500 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step100_100 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step100_100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step500_100 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step500_100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm  --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step2500_100 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step2500_100.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 12800 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 6400 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step20_delay@6400_a100 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step20_delay@6400_a100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 1500 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1200 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step100_delay@1200_a100 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step100_delay@1200_a100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 250 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step500_delay@250_a100 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step500_delay@250_a100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 100 --rounds 1000 --num_data 98000 --lr 0.002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 128 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step2500_delay@128_a100 --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step2500_delay@128_a100.txt



python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1500 --num_data 98000 --lr 0.0002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1200 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step100_delay@1200_smalllr --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step100_delay@1200_smalllr.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 1500 --num_data 98000 --lr 0.0002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1200 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step100_delay@1200_a01_smalllr --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step100_delay@1200_a01_smalllr.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 1500 --num_data 98000 --lr 0.0002 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 1200 --probe_activs --id tiny_output/tensorboardpretrain/resnet18_bn_step100_delay@1200_a03_smalllr --pretrained /fs/ess/scratch/PAS2099/jike/DelayBN/resnet18_places365.pth.tar > tiny_output/pretrain/resnet18_bn_step100_delay@1200_a03_smalllr.txt








python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 0 --probe_activs --id study_best_freeze/tensorboard/resnet18_bn_step100_tiny_shards_delay0 > study_best_freeze/resnet18_bn_step100_tiny_shards_delay0.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 627 --probe_activs --id study_best_freeze/tensorboard/resnet18_bn_step100_tiny_shards_delay_half > study_best_freeze/resnet18_bn_step100_tiny_shards_delay_half.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 0 --probe_activs --id study_best_freeze/tensorboard/resnet18_bn_step100_tiny_dir0.6_delay0 > study_best_freeze/resnet18_bn_step100_tiny_dir0.6_delay0.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 627 --probe_activs --id study_best_freeze/tensorboard/resnet18_bn_step100_tiny_dir0.6_delay_half > study_best_freeze/resnet18_bn_step100_tiny_dir0.6_delay_half.txt





#* shards
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step1 > tiny_output/resnet18_bn_step1.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step20 > tiny_output/resnet18_bn_step20.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step100 > tiny_output/resnet18_bn_step100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step500 > tiny_output/resnet18_bn_step500.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --id tiny_output/tensorboard/resnet18_bn_step2500 > tiny_output/resnet18_bn_step2500.txt

python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 125440 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step1 > tiny_output/resnet18_gn_step1.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6272 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step20 > tiny_output/resnet18_gn_step20.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step100 > tiny_output/resnet18_gn_step100.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step500 > tiny_output/resnet18_gn_step500.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --id tiny_output/tensorboard/resnet18_gn_step2500 > tiny_output/resnet18_gn_step2500.txt

#** delay BN 
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 62720 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 31360 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step1_delay@half > tiny_output/resnet18_bn_step1_delay@half.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 6400 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 3200 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step20_delay@half > tiny_output/resnet18_bn_step20_delay@half.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 1255 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 627 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step100_delay@half > tiny_output/resnet18_bn_step100_delay@half.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 251 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 126 --probe_activs --id tiny_output/tensorboard/resnet18_bn_step500_delay@half > tiny_output/resnet18_bn_step500_delay@half.txt
python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0.1 --rounds 64 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --freeze_bn_at_round 32 --log_every_round 1 --id tiny_output/tensorboard/resnet18_bn_step2500_delay@half_new > tiny_output/resnet18_bn_step2500_delay@half_new.txt


# python3 main_fl_clean_step1.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method step --alpha 0 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step1_shards > final_poll_tiny/resnet18_bn_step1_shards.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step20_shards > final_poll_tiny/resnet18_bn_step20_shards.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step100_shards > final_poll_tiny/resnet18_bn_step100_shards.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step500_shards > final_poll_tiny/resnet18_bn_step500_shards.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step2500_shards > final_poll_tiny/resnet18_bn_step2500_shards.txt
# python3 main_fl_clean_step1.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method step --alpha 0 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step1_shards > final_poll_tiny/resnet18_gn_step1_shards.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method step --alpha 0 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step20_shards > final_poll_tiny/resnet18_gn_step20_shards.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method step --alpha 0 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step100_shards > final_poll_tiny/resnet18_gn_step100_shards.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method step --alpha 0 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step500_shards > final_poll_tiny/resnet18_gn_step500_shards.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method step --alpha 0 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step2500_shards > final_poll_tiny/resnet18_gn_step2500_shards.txt
# python3 main_fl_clean_step1.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step1_dir0.1 > final_poll_tiny/resnet18_bn_step1_dir0.1.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step20_dir0.1 > final_poll_tiny/resnet18_bn_step20_dir0.1.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step100_dir0.1 > final_poll_tiny/resnet18_bn_step100_dir0.1.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step500_dir0.1 > final_poll_tiny/resnet18_bn_step500_dir0.1.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step2500_dir0.1 > final_poll_tiny/resnet18_bn_step2500_dir0.1.txt
# python3 main_fl_clean_step1.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step1_dir0.1 > final_poll_tiny/resnet18_gn_step1_dir0.1.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step20_dir0.1 > final_poll_tiny/resnet18_gn_step20_dir0.1.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step100_dir0.1 > final_poll_tiny/resnet18_gn_step100_dir0.1.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step500_dir0.1 > final_poll_tiny/resnet18_gn_step500_dir0.1.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.1 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step2500_dir0.1 > final_poll_tiny/resnet18_gn_step2500_dir0.1.txt
# python3 main_fl_clean_step1.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step1_dir0.3 > final_poll_tiny/resnet18_bn_step1_dir0.3.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step20_dir0.3 > final_poll_tiny/resnet18_bn_step20_dir0.3.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step100_dir0.3 > final_poll_tiny/resnet18_bn_step100_dir0.3.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step500_dir0.3 > final_poll_tiny/resnet18_bn_step500_dir0.3.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step2500_dir0.3 > final_poll_tiny/resnet18_bn_step2500_dir0.3.txt
# python3 main_fl_clean_step1.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step1_dir0.3 > final_poll_tiny/resnet18_gn_step1_dir0.3.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step20_dir0.3 > final_poll_tiny/resnet18_gn_step20_dir0.3.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step100_dir0.3 > final_poll_tiny/resnet18_gn_step100_dir0.3.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step500_dir0.3 > final_poll_tiny/resnet18_gn_step500_dir0.3.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.3 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step2500_dir0.3 > final_poll_tiny/resnet18_gn_step2500_dir0.3.txt
# python3 main_fl_clean_step1.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step1_dir0.6 > final_poll_tiny/resnet18_bn_step1_dir0.6.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step20_dir0.6 > final_poll_tiny/resnet18_bn_step20_dir0.6.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step100_dir0.6 > final_poll_tiny/resnet18_bn_step100_dir0.6.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step500_dir0.6 > final_poll_tiny/resnet18_bn_step500_dir0.6.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer BatchNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_bn_step2500_dir0.6 > final_poll_tiny/resnet18_bn_step2500_dir0.6.txt
# python3 main_fl_clean_step1.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 1 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step1_dir0.6 > final_poll_tiny/resnet18_gn_step1_dir0.6.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 20 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step20_dir0.6 > final_poll_tiny/resnet18_gn_step20_dir0.6.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 100 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step100_dir0.6 > final_poll_tiny/resnet18_gn_step100_dir0.6.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step500_dir0.6 > final_poll_tiny/resnet18_gn_step500_dir0.6.txt
# python3 main_fl_clean.py --dataset tiny --data /fs/scratch/PAS2099/pfl_final/data_/data/tiny-imagenet-200 -a resnet18 --print-freq 100 --steps 2500 -b 20 --frac 0.5 --method dir --alpha 0.6 --rounds 128 --num_data 98000 --lr 0.02 --num_users 10 --norm_layer GroupNorm --log_every_round 1 --id final_poll_tiny/tensorboard/resnet18_gn_step2500_dir0.6 > final_poll_tiny/resnet18_gn_step2500_dir0.6.txt









